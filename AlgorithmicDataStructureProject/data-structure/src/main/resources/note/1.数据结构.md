# æ•°æ®ç»“æ„

ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„ï¼š

1. æ•°æ®ç»“æ„æ˜¯å­˜æ”¾ã€ç»„ç»‡æ•°æ®çš„æ–¹å¼ï¼›
2. æ•°æ®ç»“æ„æ˜¯ç®—æ³•è®¾è®¡çš„åŸºç¡€ï¼›
3. å¥½çš„æ•°æ®ç»“æ„å¯ä»¥æå‡ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œå’Œå­˜å‚¨æ•ˆç‡ï¼›

# åŸºæœ¬çš„æ•°æ®ç»“æ„

## æ•°ç»„

åœ¨å†…å­˜ä¸­è¡¨ç°ä¸ºè¿ç»­çš„å­˜å‚¨ç»“æ„ã€‚å› æ­¤ä¾¿äºå¯»å€ï¼Œä¸ä¾¿äºå¢åˆ æ•°æ®ã€‚

### å‰ç¼€å’Œ

å‰ç¼€å’Œæ˜¯ä¸€ç§é‡è¦çš„é¢„å¤„ç†ï¼Œèƒ½å¤§å¤§é™ä½æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ã€‚å‰ç¼€å’Œåˆ†ä¸º**ä¸€ç»´å‰ç¼€å’Œ**å’Œ**äºŒç»´å‰ç¼€å’Œ**ã€‚

### ä¸€ç»´å‰ç¼€å’Œ

ç»™å®šä¸€ä¸ªæ•°ç»„A[1,2,â€¦â€¦n]ï¼Œåˆ™å®ƒçš„å‰ç¼€å’Œæ•°ç»„ä¸ºPrefixSum[1..n]ã€‚å®šä¹‰ä¸ºï¼šPrefixSum[i] = A[0]+A[1]+...+A[i-1]ï¼›

ä¸¾ä¸ªä¾‹å­ï¼š

A[5,6,7,8] --> PrefixSum[5,11,18,26]

PrefixSum[0] =A[0] ;

PrefixSum[1] =A[0] + A[1] ;

PrefixSum[2] =A[0] + A[1] + A[2] ;

PrefixSum[3] =A[0] + A[1] + A[2] + A[3] ;
ç”¨æ³•å¦‚ä¸‹ï¼š

1. å¯ä»¥é€šè¿‡å‰ç¼€å’Œæ±‚å‡ºä»»æ„åŒºé—´çš„æ±‚å’Œå€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³æ±‚å‡º[1,2]åŒºé—´å†…çš„æ±‚å’Œå€¼ï¼Œå³s[2]-s[0]=[5,34]=29

ä»£ç å®ç°ï¼š

```java
public class PrefixSumDemo {
    
    private static int[] preSum;
    
    public static void buildPrefixRangSum(int[] arr) {
        int N = arr.length;
        preSum = new int[N];
        preSum[0] = arr[0];
        
        for (int i = 1; i<N; i++) {
            preSum[i] = preSum[i - 1] + arr[i];
        }
    }
    
    public static int prefixRangeSum(int L, int R) {
        return L == 0 ? preSum[L] : preSum[R] - preSum[L - 1];
    }
}
```

### äºŒç»´å‰ç¼€å’Œ

åœ¨æ•°æ®é‡æå¤§çš„æƒ…å†µä¸‹ï¼ŒäºŒç»´å‰ç¼€æŸ¥æ•ˆç‡è¦é«˜äºä¸€ç»´å‰ç¼€å’Œã€‚

ä¸¾ä¸ªğŸŒ°

arr[1,5,3]

äºŒç»´å‰ç¼€å’Œæ„å»ºç»“æœå¦‚ä¸‹ï¼š
$$
\begin{bmatrix}
   1 & 6 & 9 \\
   x & 5 & 8 \\
   x & x & 3
  \end{bmatrix} \tag{4}
$$
ç›¸æ¯”äºä¸€ç»´å‰ç¼€å’Œï¼ŒäºŒç»´å‰ç¼€å’Œå¯ä»¥ç›´æ¥å–ä¹‹ï¼Œä¸ç”¨è¿›è¡Œè®¡ç®—ï¼Œè¿™ä¹Ÿæ˜¯äºŒç»´å‰ç¼€å’Œåœ¨æ•°æ®é‡æå¤§çš„æƒ…å†µä¸‹æ¯”ä¸€ç»´å‰ç¼€å’Œé«˜æ•ˆçš„åŸå› ã€‚

ä»£ç å®ç°ï¼š

```java
public class PrefixSumDemo {

    private static int[] oneDimensionalPreSum;

    private static int[][] twoDimensionalPreSum;

    /**
     * æ„å»ºä¸€ç»´å‰ç¼€å’Œ
     *
     * @param arr
     */
    public static void buildOneDimensionalPrefixRangSum(int[] arr) {
        int N = arr.length;
        oneDimensionalPreSum = new int[N];
        oneDimensionalPreSum[0] = arr[0];

        for (int i = 1; i < N; i++) {
            oneDimensionalPreSum[i] = oneDimensionalPreSum[i - 1] + arr[i];
        }
    }

    // ä¸€ç»´å‰ç¼€ç”¨æ³•
    public static int oneDimensionalPrefixRangeSum(int L, int R, int length) {
        if (L>length || R > length) {
            return 0;
        }
        return L == 0 ? oneDimensionalPreSum[L] : oneDimensionalPreSum[R] - oneDimensionalPreSum[L - 1];
    }

    public static void buildTwoDimensionalPrefixRangSum(int[] arr) {
        int N = arr.length;
        twoDimensionalPreSum = new int[N][N];
        for (int i = 0; i < N; i++) {
            for (int j = 0; j < N; j++) {
                if (i == 0 && j == 0) {
                    twoDimensionalPreSum[0][0] = arr[0];
                    continue;
                } else if (j < i) {
                    continue;
                }
                twoDimensionalPreSum[i][j] = twoDimensionalPreSum[i][j - 1] + arr[j];
            }
        }
    }
    
    // äºŒç»´å‰ç¼€å’Œç”¨æ³•
    public static int twoDimensionalPrefixRangSum(int L, int R, int length) {
        if (L>length || R > length) {
            return 0;
        }
        return twoDimensionalPreSum[L][R];
    }

    public static void main(String[] args) {
        int[] arr = new int[]{1, 4, 6, 7};
        buildTwoDimensionalPrefixRangSum(arr);
        System.out.println(twoDimensionalPrefixRangSum(0,5, arr.length));
    }
}
```



## é“¾è¡¨

åœ¨å†…å­˜ä¸­è¡¨ç°ä¸ºä¸è¿ç»­çš„å­˜å‚¨ç»“æ„ã€‚å› æ­¤ä¾¿äºå¢åˆ æ•°æ®ï¼Œä¸ä¾¿äºå¯»å€ã€‚

## éšæœºå‡½æ•°

åœ¨ Java ä¸­çš„éšæœºå‡½æ•°æ˜¯ `Math.random()`ã€‚è¯¥å‡½æ•°ä¼šç­‰æ¦‚ç‡çš„éšæœºè¿”å›ä¸€ä¸ª[0,1) çš„æ•°ã€‚åœ¨æ•°å­¦ä¸­ï¼Œç­‰æ¦‚ç‡æ˜¯ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯åœ¨è®¡ç®—æœºä¸­ï¼Œå°æ•°æ˜¯æœ‰ç²¾åº¦çš„ï¼Œæ•°å­¦ä¸­æ˜¯æ²¡æœ‰çš„ã€‚éªŒè¯å¦‚ä¸‹ï¼š

```java
/**
 * éªŒè¯ Math.random() çš„ç­‰æ¦‚ç‡
 */
public class MathRandomDemo {
    public static void main(String[] args) {
        int count = 0;
        int loopCount = 1000;
        for (int i=0; i<loopCount; i++) {
            double random = Math.random();
            if (random < 0.3) {
                count++;
            }
        }
        System.out.println((double)count /( double) loopCount);
        
        int K = 9;
        // ans åœ¨ [0,8] å¿…ç„¶æ˜¯ç­‰æ¦‚ç‡çš„
        int[] record = new int[9];
        for (int i=0; i<loopCount; i++) {
            int ans = (int) (Math.random() * K);
            record[ans]++;
        }
        
        for (int i=0; i<K; i++) {
            System.out.println(i + " å‡ºç°äº†" + record[i] + " æ¬¡");
        }
    }
}
```

è¾“å‡ºç»“æœï¼š

```txt
0.275
0 å‡ºç°äº†103 æ¬¡
1 å‡ºç°äº†107 æ¬¡
2 å‡ºç°äº†126 æ¬¡
3 å‡ºç°äº†117 æ¬¡
4 å‡ºç°äº†115 æ¬¡
5 å‡ºç°äº†106 æ¬¡
6 å‡ºç°äº†107 æ¬¡
7 å‡ºç°äº†108 æ¬¡
8 å‡ºç°äº†111 æ¬¡
```

 æ ¹æ®è¾“å‡ºç»“æœå¯ä»¥çœ‹åˆ°ï¼Œ[0,8] å‡ºç°çš„æ¬¡æ•°åŸºæœ¬å·®ä¸å¤ªå¤šã€‚